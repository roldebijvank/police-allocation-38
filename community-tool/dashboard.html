<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Community Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="style.css" />

  <style>
    .long-panel  { grid-column: 1 / -1; }
    .plotly-div  { width: 100%; height: 460px; }
    #status, #error { font-weight: 600; margin-left: 12px; }
    #status { color:#0d47a1; }
    #error  { color:#c62828; }
    .tabs { display:flex; gap:1rem; margin:1rem 0 0 24px; }
    .tabs button { padding:0.4rem 0.8rem; border:none; cursor:pointer;
                   background:#bbdefb; border-radius:4px; font-weight:600; }
    .tabs button.active { background:#0d47a1; color:#fff; }
    #tab-feedback { display:none; }
  </style>
</head>

<body>
  <header class="site-header">
    <img src="public/images/metrobadge.png" alt="Metro Police" class="logo" />
    <span class="site-title">Metropolitan Police</span>
    <nav>
      <a href="feedback.html" id="header-feedback">Give Feedback</a>
      <a href="dashboard.html"  class="active">View Data</a>
    </nav>
  </header>

  <div class="tabs">
    <button id="btn-dash"     class="active">Burglary Dashboard</button>
    <button id="btn-feedback">Community Survey</button>
  </div>

  <section id="tab-dash">
    <div style="padding:24px">
      <label style="font-weight:bold;margin-right:6px">Select Ward:</label>
      <select id="wardSel" style="padding:4px 6px"></select>
      <span id="status">Loading data…</span><span id="error"></span>
    </div>

    <div class="dashboard-container">
      <div class="dashboard-grid">
        <div class="panel long-panel">
          <h2>Burglary Trends (London mean vs. Ward)</h2>
          <div id="linePlot" class="plotly-div"></div>
        </div>

        <div class="panel long-panel">
          <h2>Ward LSOA Distribution (last 12 months)</h2>
          <div id="barPlot"  class="plotly-div"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- ───── Tab 2: feedback page in an iframe ───── -->
  <section id="tab-feedback">
    <iframe src="feedback.html"
            style="width:100%;height:calc(100vh - 160px);border:none"></iframe>
  </section>

  <script src="https://cdn.plot.ly/plotly-2.33.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <!-- ───── Main JS ───── -->
  <script src="visuals.js"></script>
</body>
</html>
